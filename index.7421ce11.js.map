{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,0GAOMC,EAAUC,SAASC,cAAc,gBACjCC,EAAiBF,SAASC,cAAc,kBACxCE,EAAkBH,SAASC,cAAc,kBACzCG,EAAoBJ,SAASC,cAAc,qBAC3CI,EAAYL,SAASC,cAAc,YAEzCK,EAAAC,GAASC,OAAOC,KAAK,CACnBC,SAAU,OACVC,QAAS,MAGX,IAAMC,EAAa,IAAI,EAAAC,EAAAC,YACjBC,EAAc,IAAI,EAAAC,EAAAC,QAAOf,GACzBgB,EAAe,IAAI,EAAAC,EAAAC,QAAOjB,EAAiB,MAC3CkB,EAAiB,IAAI,EAAAF,EAAAC,QAAOhB,EAAmB,OAC/CkB,EAAW,IAAIC,eAAe,aAAc,I,SAWnCC,I,OAAAA,EAAflB,EAAAT,EAAA,CAAAS,EAAAmB,GAAAC,MAAA,SAAAC,EAA4BC,G,IAGpBC,EAiBEC,EACAC,E,qEApBRH,EAAII,iBAEEH,EAAcD,EAAIK,OAAOC,SAASL,YAAYM,MAAMC,OAC1C,C,sBACd9B,EAAAC,GAASC,OAAO6B,QAAQ,6B,iCAG1BzB,EAAW0B,OAAOC,KAAO,EAEzBC,IACIzB,EAAY0B,WACd1B,EAAY2B,OAEd9B,EAAW0B,OAAShC,EAAAqC,EAAA,IAAK/B,EAAW0B,OAAM,CAAEM,EAAGf,I,SAG7CD,EAAIK,OAAOY,iBAAiBC,UAAW,EACvC5B,EAAa6B,O,UAEMnC,EAAWoC,W,WAAxBlB,EAAImB,EAAAC,KACJnB,EAAQD,EAAKqB,UAET,C,uBACR7C,EAAAC,GAASC,OAAO4C,QACd,4E,2BAMJ9C,EAAAC,GAASC,OAAO6C,QAAQ,GAAiBC,OAAdvB,EAAM,UAA+BuB,OAAb,IAAVvB,EAAc,GAAK,IAAI,YAEhEnB,EAAW2C,WAAaC,KAAKC,KAAK1B,EAAQnB,EAAW0B,OAAOoB,UAC5DC,EAAa7B,EAAK8B,MAClBtC,EAASuC,UAELC,KACFlD,EAAW0B,OAAOC,MAAQ,EAC1BxB,EAAYgC,OACZhC,EAAYgD,UAEZzD,EAAAC,GAASC,OAAO6C,QACd,8D,kDAGJW,QAAQC,IAAGhB,EAAAiB,IACX5D,EAAAC,GAASC,OAAO4C,QAAQ,0C,yBAExBlC,EAAawB,OACbd,EAAIK,OAAOY,iBAAiBC,UAAW,E,8EAlDhBqB,MAAAC,KAAAC,U,UAsDZC,I,OAAAA,EAAfhE,EAAAT,EAAA,CAAAS,EAAAmB,GAAAC,MAAA,SAAAC,I,kFAEIZ,EAAYwD,UACZlD,EAAe0B,O,SACInC,EAAWoC,W,OAE9BW,EAFUV,EAAAC,KAEQU,MAClBY,IACAlD,EAASuC,UACT9C,EAAYgD,SAERD,IACFlD,EAAW0B,OAAOC,MAAQ,GAE1BjC,EAAAC,GAASC,OAAO6C,QACd,8DAEFtC,EAAY2B,Q,kDAGdsB,QAAQC,IAAGhB,EAAAiB,IACX5D,EAAAC,GAASC,OAAO4C,QAAQ,0C,yBAExB/B,EAAeqB,O,8EAvBWyB,MAAAC,KAAAC,U,CA0B9B,SAASP,IACP,OAAOlD,EAAW2C,WAAa3C,EAAW0B,OAAOC,I,CAGnD,SAASkC,EAAaC,GACpB,IACEC,EAOED,EAPFC,aACAC,EAMEF,EANFE,cACAC,EAKEH,EALFG,MACAC,EAIEJ,EAJFI,MACAC,EAGEL,EAHFK,SACAC,EAEEN,EAFFM,UACAC,EACEP,EADFO,KAEF,MAAO,4CACoC3B,OAA5BsB,EAAc,gBAAoCtB,OAAtBqB,EAAa,WAGlCrB,OAH2C2B,EAAK,4GAMhD3B,OAHAuB,EAAM,yEAMHvB,OAHHwB,EAAM,4EAMFxB,OAHDyB,EAAS,6EAGEzB,OAAV0B,EAAU,2C,CAMtC,SAASxC,IACPnC,EAAU6E,UAAY,E,CAGxB,SAASvB,EAAawB,GACpB,IAAMC,EAASD,EAAME,IAAIZ,GAAca,KAAK,IAC5CjF,EAAUkF,mBAAmB,YAAaH,E,CAG5C,SAASZ,IACP,IAAQgB,EACNnF,EAAUoF,kBAAkBC,wBADtBC,OAGRC,OAAOC,SAAS,CACdC,IAAkB,EAAbN,EACLO,SAAU,U,CAzId7E,EAAawB,OACb3B,EAAY2B,OACZ3B,EAAYwD,UACZlD,EAAeqB,OAEf3C,EAAQiG,iBAAiB,U,SAIGpE,G,OAAbJ,EAAY2C,MAAAC,KAAAC,U,IAH3BnE,EAAe8F,iBAAiB,S,kBAyDjB1B,EAAeH,MAAAC,KAAAC,U,KAxD9B,EAAA4B,EAAAC,kB","sources":["src/js/index.js"],"sourcesContent":["import Notiflix from 'notiflix';\nimport simpleLightbox from 'simplelightbox';\nimport { PixabayAPI } from './modules/pixabay-api';\nimport { Button } from './modules/load-more-btn';\nimport { Loader } from './modules/loader';\nimport { goTopBtnHandler } from './modules/go-top-btn';\n\nconst formRef = document.querySelector('#search-form');\nconst loadMoreBtnRef = document.querySelector('.load-more-btn');\nconst searchLoaderRef = document.querySelector('.search-loader');\nconst loadMoreLoaderRef = document.querySelector('.load-more-loader');\nconst renderRef = document.querySelector('.gallery');\n\nNotiflix.Notify.init({\n  fontSize: '16px',\n  timeout: 5000,\n});\n\nconst pixabayApi = new PixabayAPI();\nconst loadMoreBtn = new Button(loadMoreBtnRef);\nconst searchLoader = new Loader(searchLoaderRef, 'ðŸ”');\nconst loadMoreLoader = new Loader(loadMoreLoaderRef, 'ðŸŽžï¸');\nconst lightbox = new SimpleLightbox('.gallery a', {});\n\nsearchLoader.hide();\nloadMoreBtn.hide();\nloadMoreBtn.disable();\nloadMoreLoader.hide();\n\nformRef.addEventListener('submit', onFormSubmit);\nloadMoreBtnRef.addEventListener('click', onLoadMoreClick);\ngoTopBtnHandler();\n\nasync function onFormSubmit(evt) {\n  evt.preventDefault();\n\n  const searchQuery = evt.target.elements.searchQuery.value.trim();\n  if (!searchQuery) {\n    Notiflix.Notify.warning('Plase input search query!');\n    return;\n  }\n  pixabayApi.params.page = 1;\n\n  clearRender();\n  if (loadMoreBtn.isVisible) {\n    loadMoreBtn.hide();\n  }\n  pixabayApi.params = { ...pixabayApi.params, q: searchQuery };\n\n  try {\n    evt.target.lastElementChild.disabled = true;\n    searchLoader.show();\n\n    const data = await pixabayApi.getCards();\n    const total = data.totalHits;\n\n    if (!total) {\n      Notiflix.Notify.failure(\n        'Sorry, there are no images matching your search query. Please try again.'\n      );\n\n      return;\n    }\n\n    Notiflix.Notify.success(`${total} image${total === 1 ? '' : 's'} finded`);\n\n    pixabayApi.totalPages = Math.ceil(total / pixabayApi.params.per_page);\n    renderMarkup(data.hits);\n    lightbox.refresh();\n\n    if (isNextPage()) {\n      pixabayApi.params.page += 1;\n      loadMoreBtn.show();\n      loadMoreBtn.enable();\n    } else\n      Notiflix.Notify.success(\n        \"We're sorry, but you've reached the end of search results.\"\n      );\n  } catch (error) {\n    console.log(error);\n    Notiflix.Notify.failure('Oops, something went wrong, try again!');\n  } finally {\n    searchLoader.hide();\n    evt.target.lastElementChild.disabled = false;\n  }\n}\n\nasync function onLoadMoreClick() {\n  try {\n    loadMoreBtn.disable();\n    loadMoreLoader.show();\n    const data = await pixabayApi.getCards();\n\n    renderMarkup(data.hits);\n    scrollCards();\n    lightbox.refresh();\n    loadMoreBtn.enable();\n\n    if (isNextPage()) {\n      pixabayApi.params.page += 1;\n    } else {\n      Notiflix.Notify.success(\n        \"We're sorry, but you've reached the end of search results.\"\n      );\n      loadMoreBtn.hide();\n    }\n  } catch (error) {\n    console.log(error);\n    Notiflix.Notify.failure('Oops, something went wrong, try again!');\n  } finally {\n    loadMoreLoader.hide();\n  }\n}\nfunction isNextPage() {\n  return pixabayApi.totalPages > pixabayApi.params.page;\n}\n\nfunction cardTemplate(card) {\n  const {\n    webformatURL,\n    largeImageURL,\n    likes,\n    views,\n    comments,\n    downloads,\n    tags,\n  } = card;\n  return `<div class=\"photo-card\">\n      <a href=\"${largeImageURL}\"><img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" /></a>\n      <div class=\"info\">\n        <p class=\"info-item\">\n          <b>Likes</b>${likes}\n        </p>\n        <p class=\"info-item\">\n          <b>Views</b>${views}\n        </p>\n        <p class=\"info-item\">\n          <b>Comments</b>${comments}\n        </p>\n        <p class=\"info-item\">\n          <b>Downloads</b>${downloads}\n        </p>\n      </div>\n    </div>`;\n}\n\nfunction clearRender() {\n  renderRef.innerHTML = '';\n}\n\nfunction renderMarkup(cards) {\n  const markup = cards.map(cardTemplate).join('');\n  renderRef.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction scrollCards() {\n  const { height: cardHeight } =\n    renderRef.firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["$bpxeT","parcelRequire","$44ae6d9db4eaca0f$var$formRef","document","querySelector","$44ae6d9db4eaca0f$var$loadMoreBtnRef","$44ae6d9db4eaca0f$var$searchLoaderRef","$44ae6d9db4eaca0f$var$loadMoreLoaderRef","$44ae6d9db4eaca0f$var$renderRef","$parcel$interopDefault","$6JpON","Notify","init","fontSize","timeout","$44ae6d9db4eaca0f$var$pixabayApi","$kZWxX","PixabayAPI","$44ae6d9db4eaca0f$var$loadMoreBtn","$hDTxg","Button","$44ae6d9db4eaca0f$var$searchLoader","$ip97o","Loader","$44ae6d9db4eaca0f$var$loadMoreLoader","$44ae6d9db4eaca0f$var$lightbox","SimpleLightbox","$44ae6d9db4eaca0f$var$_onFormSubmit","$2TvXO","mark","_callee","evt","searchQuery","data","total","preventDefault","target","elements","value","trim","warning","params","page","$44ae6d9db4eaca0f$var$clearRender","isVisible","hide","$dDDEV","q","lastElementChild","disabled","show","getCards","_ctx","sent","totalHits","failure","success","concat","totalPages","Math","ceil","per_page","$44ae6d9db4eaca0f$var$renderMarkup","hits","refresh","$44ae6d9db4eaca0f$var$isNextPage","enable","console","log","t0","apply","this","arguments","$44ae6d9db4eaca0f$var$_onLoadMoreClick","disable","$44ae6d9db4eaca0f$var$scrollCards","$44ae6d9db4eaca0f$var$cardTemplate","card","webformatURL","largeImageURL","likes","views","comments","downloads","tags","innerHTML","cards","markup","map","join","insertAdjacentHTML","cardHeight","firstElementChild","getBoundingClientRect","height","window","scrollBy","top","behavior","addEventListener","$gx7bW","goTopBtnHandler"],"version":3,"file":"index.7421ce11.js.map"}