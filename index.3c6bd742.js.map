{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,S,uCCAAC,EAAAD,EAAA,S,8BDYA,MAAME,EAAUC,SAASC,cAAc,gBACjCC,EAAiBF,SAASC,cAAc,kBACxCE,EAAkBH,SAASC,cAAc,kBACzCG,EAAoBJ,SAASC,cAAc,qBAC3CI,EAAYL,SAASC,cAAc,YAEzCK,EAAAV,GAASW,OAAOC,KAAK,CACnBC,SAAU,OACVC,QAAS,IACTC,cAAc,IAGhB,MAAMC,EAAa,IAAI,EAAAC,EAAAC,YACjBC,EAAc,ICzBb,MAMLC,SACEC,KAAKC,OAAOC,UAAW,C,CAEzBC,UACEH,KAAKC,OAAOC,UAAW,C,CAEzBE,OACEJ,KAAKC,OAAOI,UAAUC,OAAO,aAC7BN,KAAKO,WAAY,C,CAEnBC,OACER,KAAKC,OAAOI,UAAUI,IAAI,aAC1BT,KAAKO,WAAY,C,CAfnBG,YAAYT,GAFZZ,EAAAR,EAAA,CAAAmB,KAAA,aAAY,GAGVA,KAAKC,OAASA,C,GDqBahB,GACzB0B,EAAe,IAAI,EAAAC,EAAAC,QAAO3B,EAAiB,MAC3C4B,EAAiB,IAAI,EAAAF,EAAAC,QAAO1B,EAAmB,OAC/C4B,EAAW,IAAI1B,EAAA2B,GAAJ,CAAmB,aAAc,CAAEC,eAAgB,KAEpEN,EAAaH,OACbV,EAAYU,OACZM,EAAeN,OAEf1B,EAAQoC,iBAAiB,UAIzBC,eAA4BC,GAC1BA,EAAIC,iBAEJ,MAAMC,EAAcF,EAAIG,OAAOC,SAASF,YAAYG,MAAMC,OAC1D,IAAKJ,EAEH,YADAjC,EAAAV,GAASW,OAAOqC,QAAQ,6BAI1BhC,EAAWiC,OAAOC,KAAO,GACzB,EAAAC,EAAAC,aAAY3C,GACRU,EAAYS,WACdT,EAAYU,OAEdb,EAAWiC,OAAS,IAAKjC,EAAWiC,OAAQI,EAAGV,GAE/C,IACEF,EAAIG,OAAOU,iBAAiB/B,UAAW,EACvCS,EAAaP,OAEb,MAAM8B,QAAavC,EAAWwC,WACxBC,EAAQF,EAAKG,UAEnB,IAAKD,EAIH,YAHA/C,EAAAV,GAASW,OAAOgD,QACd,4EAKJjD,EAAAV,GAASW,OAAOiD,QACd,oBAAoBH,UAAwB,IAAVA,EAAc,GAAK,QAEvDzC,EAAW6C,WAAaC,KAAKC,KAAKN,EAAQzC,EAAWiC,OAAOe,WAC5D,EAAAb,EAAAc,cAAaxD,EAAW8C,EAAKW,MAC7B9B,EAAS+B,UAELnD,EAAWoD,cACbpD,EAAWiC,OAAOC,MAAQ,EAC1B/B,EAAYM,QAEZf,EAAAV,GAASW,OAAOiD,QACd,6D,CAEJ,MAAOS,GACPC,QAAQC,IAAIF,GACZ3D,EAAAV,GAASW,OAAOgD,QAAQ,yC,CACzB,QACC3B,EAAaH,OACbY,EAAIG,OAAOU,iBAAiB/B,UAAW,C,KApD3CjB,EAAeiC,iBAAiB,SAwDhCC,iBACE,IACErB,EAAYK,UACZW,EAAeV,OACf,MAAM8B,QAAavC,EAAWwC,YAE9B,EAAAL,EAAAc,cAAaxD,EAAW8C,EAAKW,OAC7B,EAAAf,EAAAqB,aAAY/D,GACZ2B,EAAS+B,UACThD,EAAYC,SAERJ,EAAWoD,aACbpD,EAAWiC,OAAOC,MAAQ,GAE1BxC,EAAAV,GAASW,OAAOiD,QACd,8DAEFzC,EAAYU,O,CAEd,MAAOwC,GACPC,QAAQC,IAAIF,GACZ3D,EAAAV,GAASW,OAAOgD,QAAQ,yC,CACzB,QACCxB,EAAeN,M,MA9EnB,EAAA4C,EAAAC","sources":["src/js/index.js","src/js/modules/load-more-btn.js"],"sourcesContent":["import Notiflix from 'notiflix';\nimport SimpleLightbox from 'simplelightbox';\nimport { PixabayAPI } from './modules/pixabay-api';\nimport {\n  renderMarkup,\n  scrollCards,\n  clearRender,\n} from './modules/renderHandler';\nimport { Button } from './modules/load-more-btn';\nimport { Loader } from './modules/loader';\nimport { goTopBtnHandler } from './modules/go-top-btn';\n\nconst formRef = document.querySelector('#search-form');\nconst loadMoreBtnRef = document.querySelector('.load-more-btn');\nconst searchLoaderRef = document.querySelector('.search-loader');\nconst loadMoreLoaderRef = document.querySelector('.load-more-loader');\nconst renderRef = document.querySelector('.gallery');\n\nNotiflix.Notify.init({\n  fontSize: '16px',\n  timeout: 4000,\n  clickToClose: true,\n});\n\nconst pixabayApi = new PixabayAPI();\nconst loadMoreBtn = new Button(loadMoreBtnRef);\nconst searchLoader = new Loader(searchLoaderRef, 'üîç');\nconst loadMoreLoader = new Loader(loadMoreLoaderRef, 'üéûÔ∏è');\nconst lightbox = new SimpleLightbox('.gallery a', { overlayOpacity: 0.9 });\n\nsearchLoader.hide();\nloadMoreBtn.hide();\nloadMoreLoader.hide();\n\nformRef.addEventListener('submit', onFormSubmit);\nloadMoreBtnRef.addEventListener('click', onLoadMoreClick);\ngoTopBtnHandler();\n\nasync function onFormSubmit(evt) {\n  evt.preventDefault();\n\n  const searchQuery = evt.target.elements.searchQuery.value.trim();\n  if (!searchQuery) {\n    Notiflix.Notify.warning('Plase input search query!');\n    return;\n  }\n\n  pixabayApi.params.page = 1;\n  clearRender(renderRef);\n  if (loadMoreBtn.isVisible) {\n    loadMoreBtn.hide();\n  }\n  pixabayApi.params = { ...pixabayApi.params, q: searchQuery };\n\n  try {\n    evt.target.lastElementChild.disabled = true;\n    searchLoader.show();\n\n    const data = await pixabayApi.getCards();\n    const total = data.totalHits;\n\n    if (!total) {\n      Notiflix.Notify.failure(\n        'Sorry, there are no images matching your search query. Please try again.'\n      );\n      return;\n    }\n\n    Notiflix.Notify.success(\n      `Hooray! We found ${total} image${total === 1 ? '' : 's'}.`\n    );\n    pixabayApi.totalPages = Math.ceil(total / pixabayApi.params.per_page);\n    renderMarkup(renderRef, data.hits);\n    lightbox.refresh();\n\n    if (pixabayApi.isNextPage()) {\n      pixabayApi.params.page += 1;\n      loadMoreBtn.show();\n    } else\n      Notiflix.Notify.success(\n        \"We're sorry, but you've reached the end of search results.\"\n      );\n  } catch (error) {\n    console.log(error);\n    Notiflix.Notify.failure('Oops, something went wrong, try again!');\n  } finally {\n    searchLoader.hide();\n    evt.target.lastElementChild.disabled = false;\n  }\n}\n\nasync function onLoadMoreClick() {\n  try {\n    loadMoreBtn.disable();\n    loadMoreLoader.show();\n    const data = await pixabayApi.getCards();\n\n    renderMarkup(renderRef, data.hits);\n    scrollCards(renderRef);\n    lightbox.refresh();\n    loadMoreBtn.enable();\n\n    if (pixabayApi.isNextPage()) {\n      pixabayApi.params.page += 1;\n    } else {\n      Notiflix.Notify.success(\n        \"We're sorry, but you've reached the end of search results.\"\n      );\n      loadMoreBtn.hide();\n    }\n  } catch (error) {\n    console.log(error);\n    Notiflix.Notify.failure('Oops, something went wrong, try again!');\n  } finally {\n    loadMoreLoader.hide();\n  }\n}\n","export class Button {\n  isVisible = true;\n\n  constructor(btnRef) {\n    this.btnRef = btnRef;\n  }\n  enable() {\n    this.btnRef.disabled = false;\n  }\n  disable() {\n    this.btnRef.disabled = true;\n  }\n  show() {\n    this.btnRef.classList.remove('is-hidden');\n    this.isVisible = true;\n  }\n  hide() {\n    this.btnRef.classList.add('is-hidden');\n    this.isVisible = false;\n  }\n}\n"],"names":["$7Y9D8","parcelRequire","$iJYdK","$85a5f86b715fe7db$var$formRef","document","querySelector","$85a5f86b715fe7db$var$loadMoreBtnRef","$85a5f86b715fe7db$var$searchLoaderRef","$85a5f86b715fe7db$var$loadMoreLoaderRef","$85a5f86b715fe7db$var$renderRef","$parcel$interopDefault","Notify","init","fontSize","timeout","clickToClose","$85a5f86b715fe7db$var$pixabayApi","$g9nP5","PixabayAPI","$85a5f86b715fe7db$var$loadMoreBtn","enable","this","btnRef","disabled","disable","show","classList","remove","isVisible","hide","add","constructor","$85a5f86b715fe7db$var$searchLoader","$irItn","Loader","$85a5f86b715fe7db$var$loadMoreLoader","$85a5f86b715fe7db$var$lightbox","$fZKcF","overlayOpacity","addEventListener","async","evt","preventDefault","searchQuery","target","elements","value","trim","warning","params","page","$im6YL","clearRender","q","lastElementChild","data","getCards","total","totalHits","failure","success","totalPages","Math","ceil","per_page","renderMarkup","hits","refresh","isNextPage","error","console","log","scrollCards","$6HtdS","goTopBtnHandler"],"version":3,"file":"index.3c6bd742.js.map"}